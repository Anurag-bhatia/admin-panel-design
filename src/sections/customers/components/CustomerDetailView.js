import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { ArrowLeft, User, AlertCircle, FileText, Car, Wallet, Clock } from 'lucide-react';
export function CustomerDetailView({ customer, vehicles, incidents, challans, activityLogs, onBack, onEdit, onCreateIncident, onViewIncident, onViewChallan, onViewVehicle }) {
    const [activeTab, setActiveTab] = useState('details');
    const formatDate = (dateString) => {
        return new Date(dateString).toLocaleDateString('en-IN', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
        });
    };
    const formatCurrency = (amount) => {
        return new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            minimumFractionDigits: 0
        }).format(amount);
    };
    const getPaymentStatusBadge = (status) => {
        const styles = {
            paid: 'bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400',
            pending: 'bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400',
            overdue: 'bg-rose-50 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400'
        };
        return styles[status];
    };
    const getTabIcon = (tab) => {
        const icons = {
            details: _jsx(User, { className: "w-4 h-4" }),
            incidents: _jsx(AlertCircle, { className: "w-4 h-4" }),
            challans: _jsx(FileText, { className: "w-4 h-4" }),
            vehicles: _jsx(Car, { className: "w-4 h-4" }),
            financials: _jsx(Wallet, { className: "w-4 h-4" }),
            activity: _jsx(Clock, { className: "w-4 h-4" })
        };
        return icons[tab];
    };
    return (_jsx("div", { className: "min-h-screen bg-slate-50 dark:bg-slate-950 p-6 lg:p-8", children: _jsxs("div", { className: "max-w-6xl mx-auto", children: [_jsxs("div", { className: "flex items-center gap-4 mb-8", children: [_jsx("button", { onClick: onBack, className: "flex items-center justify-center w-10 h-10 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors", children: _jsx(ArrowLeft, { className: "w-5 h-5 text-slate-600 dark:text-slate-400" }) }), _jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("h1", { className: "text-3xl font-semibold text-slate-900 dark:text-slate-50", children: customer.name }), _jsx("span", { className: `inline-flex px-3 py-1.5 text-xs font-medium rounded-full ${getPaymentStatusBadge(customer.paymentStatus)}`, children: customer.paymentStatus.charAt(0).toUpperCase() + customer.paymentStatus.slice(1) })] }), _jsxs("p", { className: "text-slate-500 dark:text-slate-400 mt-1", children: ["Customer ID: ", customer.customerId] })] }), _jsxs("div", { className: "flex gap-2", children: [_jsx("button", { onClick: () => onCreateIncident?.(customer.id), className: "px-4 py-2.5 bg-slate-600 hover:bg-slate-700 text-white rounded-lg font-medium transition-colors", children: "Create Incident" }), _jsx("button", { onClick: () => onEdit?.(customer.id), className: "px-4 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-medium transition-colors", children: "Edit Details" })] })] }), _jsx("div", { className: "mb-6 -mx-6 lg:-mx-8 px-6 lg:px-8 overflow-x-auto", children: _jsx("div", { className: "flex gap-1 p-1 bg-slate-100 dark:bg-slate-800 rounded-lg w-fit min-w-full", children: ['details', 'incidents', 'challans', 'vehicles', 'financials', 'activity'].map((tab) => (_jsxs("button", { onClick: () => setActiveTab(tab), className: `inline-flex items-center gap-2 px-3 lg:px-4 py-2 text-xs lg:text-sm font-medium rounded-md transition-colors whitespace-nowrap flex-shrink-0 ${activeTab === tab
                                ? 'bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm'
                                : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white'}`, children: [getTabIcon(tab), tab.charAt(0).toUpperCase() + tab.slice(1)] }, tab))) }) }), _jsxs("div", { className: "bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 p-6", children: [activeTab === 'details' && (_jsxs("div", { children: [_jsx("h2", { className: "text-lg font-semibold text-slate-900 dark:text-slate-50 mb-6", children: "Customer Information" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-8", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-sm font-semibold text-slate-900 dark:text-slate-50 mb-4", children: "Personal Details" }), _jsxs("div", { className: "space-y-4", children: [_jsx(InfoField, { label: "Full Name", value: customer.name }), _jsx(InfoField, { label: "Email", value: customer.email }), _jsx(InfoField, { label: "Mobile", value: customer.mobile }), _jsx(InfoField, { label: "Customer ID", value: customer.customerId })] })] }), _jsxs("div", { children: [_jsx("h3", { className: "text-sm font-semibold text-slate-900 dark:text-slate-50 mb-4", children: "Account Information" }), _jsxs("div", { className: "space-y-4", children: [_jsx(InfoField, { label: "Account Created", value: formatDate(customer.accountCreatedDate) }), _jsx(InfoField, { label: "Last Activity", value: formatDate(customer.lastActivity) }), _jsx(InfoField, { label: "Total Vehicles", value: customer.totalVehicles.toString() }), _jsx(InfoField, { label: "Total Incidents", value: customer.totalIncidents.toString() }), _jsx(InfoField, { label: "Payment Status", value: customer.paymentStatus })] })] })] })] })), activeTab === 'incidents' && (_jsxs("div", { children: [_jsxs("h2", { className: "text-lg font-semibold text-slate-900 dark:text-slate-50 mb-4", children: ["Linked Incidents (", incidents.length, ")"] }), incidents.length === 0 ? (_jsxs("div", { className: "text-center py-12", children: [_jsx(AlertCircle, { className: "w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3" }), _jsx("p", { className: "text-slate-500 dark:text-slate-400", children: "No incidents linked to this customer yet" })] })) : (_jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full", children: [_jsx("thead", { children: _jsxs("tr", { className: "border-b border-slate-200 dark:border-slate-800", children: [_jsx("th", { className: "px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase", children: "Incident ID" }), _jsx("th", { className: "px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase", children: "Vehicle" }), _jsx("th", { className: "px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase", children: "Status" }), _jsx("th", { className: "px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase", children: "Date" }), _jsx("th", { className: "px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase", children: "Actions" })] }) }), _jsx("tbody", { className: "divide-y divide-slate-200 dark:divide-slate-800", children: incidents.map((incident) => (_jsxs("tr", { className: "hover:bg-slate-50 dark:hover:bg-slate-800/50", children: [_jsx("td", { className: "px-4 py-3 font-medium text-slate-900 dark:text-slate-50", children: incident.incidentId }), _jsx("td", { className: "px-4 py-3 text-sm text-slate-600 dark:text-slate-300", children: incident.vehicleNumber }), _jsx("td", { className: "px-4 py-3", children: _jsx("span", { className: `inline-block px-2.5 py-1 rounded text-xs font-medium ${incident.status === 'resolved' ? 'bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400' :
                                                                    incident.status === 'in-progress' ? 'bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400' :
                                                                        incident.status === 'pending' ? 'bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300' :
                                                                            'bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300'}`, children: incident.status.replace('-', ' ') }) }), _jsx("td", { className: "px-4 py-3 text-sm text-slate-600 dark:text-slate-300", children: formatDate(incident.createdDate) }), _jsx("td", { className: "px-4 py-3", children: _jsx("button", { onClick: () => onViewIncident?.(incident.id), className: "text-xs font-medium text-cyan-600 dark:text-cyan-400 hover:underline", children: "View Details" }) })] }, incident.id))) })] }) }))] })), activeTab === 'challans' && (_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsx("h2", { className: "text-lg font-semibold text-slate-900 dark:text-slate-50", children: "Challans" }), _jsxs("span", { className: "text-sm text-slate-500 dark:text-slate-400", children: [challans.length, " total"] })] }), challans.length === 0 ? (_jsxs("div", { className: "text-center py-12", children: [_jsx(FileText, { className: "w-12 h-12 text-slate-300 dark:text-slate-700 mx-auto mb-3" }), _jsx("p", { className: "text-slate-600 dark:text-slate-400", children: "No challans yet" })] })) : (_jsx("div", { className: "space-y-3", children: challans.map((challan) => (_jsx("div", { onClick: () => onViewChallan?.(challan.id), className: "p-4 border border-slate-200 dark:border-slate-800 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors", children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx("span", { className: "font-medium text-slate-900 dark:text-white", children: challan.challanId }), _jsx("span", { className: `px-2 py-0.5 rounded text-xs font-medium ${challan.paymentStatus === 'paid' ? 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400' :
                                                                        challan.paymentStatus === 'pending' ? 'bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400' :
                                                                            challan.paymentStatus === 'overdue' ? 'bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400' :
                                                                                'bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400'}`, children: challan.paymentStatus })] }), _jsxs("div", { className: "text-sm text-slate-600 dark:text-slate-400", children: [_jsxs("p", { children: [challan.challanType, " \u2022 ", challan.vehicleNumber] }), _jsxs("p", { className: "mt-1", children: ["Resolution: ", challan.resolutionState] })] }), _jsxs("div", { className: "mt-2 text-xs text-slate-500 dark:text-slate-500", children: ["Issued: ", formatDate(challan.issuedDate), " \u2022 Due: ", formatDate(challan.dueDate)] })] }), _jsx("div", { className: "text-right", children: _jsx("div", { className: "text-lg font-semibold text-slate-900 dark:text-white", children: formatCurrency(challan.amount) }) })] }) }, challan.id))) }))] })), activeTab === 'vehicles' && (_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsx("h2", { className: "text-lg font-semibold text-slate-900 dark:text-slate-50", children: "Vehicles" }), _jsxs("span", { className: "text-sm text-slate-500 dark:text-slate-400", children: [vehicles.length, " total"] })] }), vehicles.length === 0 ? (_jsxs("div", { className: "text-center py-12", children: [_jsx(Car, { className: "w-12 h-12 text-slate-300 dark:text-slate-700 mx-auto mb-3" }), _jsx("p", { className: "text-slate-600 dark:text-slate-400", children: "No vehicles yet" })] })) : (_jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: vehicles.map((vehicle) => (_jsx("div", { onClick: () => onViewVehicle?.(vehicle.id), className: "p-4 border border-slate-200 dark:border-slate-800 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors", children: _jsxs("div", { className: "flex items-start gap-3", children: [_jsx("div", { className: "flex-shrink-0 w-10 h-10 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg flex items-center justify-center", children: _jsx(Car, { className: "w-5 h-5 text-cyan-600 dark:text-cyan-400" }) }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "font-semibold text-slate-900 dark:text-white mb-1", children: vehicle.vehicleNumber }), _jsxs("div", { className: "text-sm text-slate-600 dark:text-slate-400", children: [_jsxs("p", { children: [vehicle.make, " ", vehicle.model] }), _jsx("p", { className: "mt-1", children: vehicle.vehicleType })] }), _jsxs("div", { className: "mt-2 text-xs text-slate-500 dark:text-slate-500", children: ["Registered: ", formatDate(vehicle.registrationDate)] })] }), _jsx("span", { className: `px-2 py-1 rounded text-xs font-medium ${vehicle.status === 'active'
                                                        ? 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400'
                                                        : 'bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400'}`, children: vehicle.status })] }) }, vehicle.id))) }))] })), activeTab === 'financials' && (_jsxs("div", { children: [_jsx("h2", { className: "text-lg font-semibold text-slate-900 dark:text-slate-50 mb-6", children: "Financial Summary" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsxs("div", { className: "p-4 bg-slate-50 dark:bg-slate-800 rounded-lg", children: [_jsx("div", { className: "text-sm text-slate-600 dark:text-slate-400 mb-1", children: "Total Spend" }), _jsx("div", { className: "text-2xl font-bold text-slate-900 dark:text-white", children: formatCurrency(customer.financialSummary.totalSpend) })] }), _jsxs("div", { className: "p-4 bg-amber-50 dark:bg-amber-900/30 rounded-lg", children: [_jsx("div", { className: "text-sm text-amber-700 dark:text-amber-400 mb-1", children: "Pending Payments" }), _jsx("div", { className: "text-2xl font-bold text-amber-900 dark:text-amber-100", children: formatCurrency(customer.financialSummary.pendingPayments) })] }), _jsxs("div", { className: "p-4 bg-emerald-50 dark:bg-emerald-900/30 rounded-lg", children: [_jsx("div", { className: "text-sm text-emerald-700 dark:text-emerald-400 mb-1", children: "Paid Amount" }), _jsx("div", { className: "text-2xl font-bold text-emerald-900 dark:text-emerald-100", children: formatCurrency(customer.financialSummary.paidAmount) })] }), _jsxs("div", { className: "p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg", children: [_jsx("div", { className: "text-sm text-blue-700 dark:text-blue-400 mb-1", children: "Refunds Issued" }), _jsx("div", { className: "text-2xl font-bold text-blue-900 dark:text-blue-100", children: formatCurrency(customer.financialSummary.refundsIssued) })] })] })] })), activeTab === 'activity' && (_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsx("h2", { className: "text-lg font-semibold text-slate-900 dark:text-slate-50", children: "Activity Log" }), _jsxs("span", { className: "text-sm text-slate-500 dark:text-slate-400", children: [activityLogs.length, " activities"] })] }), activityLogs.length === 0 ? (_jsxs("div", { className: "text-center py-12", children: [_jsx(Clock, { className: "w-12 h-12 text-slate-300 dark:text-slate-700 mx-auto mb-3" }), _jsx("p", { className: "text-slate-600 dark:text-slate-400", children: "No activity yet" })] })) : (_jsx("div", { className: "space-y-4", children: activityLogs.map((log, index) => (_jsxs("div", { className: "flex gap-4", children: [_jsx("div", { className: "flex-shrink-0 w-8 h-8 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center", children: _jsx(Clock, { className: "w-4 h-4 text-cyan-600 dark:text-cyan-400" }) }), _jsx("div", { className: "flex-1 pb-4 border-b border-slate-200 dark:border-slate-800 last:border-0", children: _jsx("div", { className: "flex items-start justify-between", children: _jsxs("div", { children: [_jsx("div", { className: "font-medium text-slate-900 dark:text-white", children: log.action }), _jsx("div", { className: "text-sm text-slate-600 dark:text-slate-400 mt-1", children: log.description }), _jsxs("div", { className: "text-xs text-slate-500 dark:text-slate-500 mt-2", children: ["by ", log.performedBy, " \u2022 ", new Date(log.timestamp).toLocaleString('en-IN')] })] }) }) })] }, log.id))) }))] }))] })] }) }));
}
function InfoField({ label, value }) {
    return (_jsxs("div", { children: [_jsx("div", { className: "text-xs font-medium text-slate-500 dark:text-slate-400 mb-1", children: label }), _jsx("div", { className: "text-sm text-slate-900 dark:text-white", children: value })] }));
}
